syntax = "proto3";
package Protocol;

import "Enum.proto";
import "Struct.proto";

message C_LOGIN
{
}

// to client
message S_LOGIN 
{
	bool success = 1;
	uint32 playerID = 2; // id from server
}

message C_ENTER_GAME
{
	Player player = 1;
	PlayerSkin playerSkin = 2;
}

// to broadcast, client
message S_ENTER_GAME
{
	bool success = 1;
	Player player = 2;
	PlayerSkin playerSkin = 3;
}

message S_OTHER_PLAYER
{
	repeated Player player = 1;
	repeated PlayerSkin playerSkin = 2;
}

message C_PLAYER_INPUT
{
	Player player = 1;
	uint32 inputBit = 2; // space, 1 ,2, 3(legacy), wasd ml, mr
}

// to broadcast, client
message S_PLAYER_INPUT
{
	bool success = 1;
	Player player = 2;
	uint32 inputBit = 3; // space, 1 ,2, 3(legacy), wasd ml, mr
}

message C_PLAYER_WORLD
{
	Player player = 1;
	Matrix matWorld = 2;
}

message S_PLAYER_WORLD
{
	bool success = 1;
	Player player = 2;
	Matrix matWorld = 3;
}

message C_PLAYER_YAW_ACTION
{
	Player player = 1;
	float yaw = 2;
	uint32 actionBit = 3; // roll, melee attack
}

message S_PLAYER_YAW_ACTION
{
	bool success = 1;
	Player player = 2;
	float yaw = 3;
	uint32 actionBit = 4;
}

message C_PLAYER_ACTION
{
	Player player = 1;
	uint32 actionBit = 2; // potion, legacy 1,2,3
}
message S_PLAYER_ACTION
{
	bool success = 1;
	Player player = 2;
	uint32 actionBit = 3; // potion, legacy 1,2,3
}

message C_PLAYER_ARROW
{
	Player player = 1;
	float yaw = 2;
	Vec3 vLookAt = 3;
	uint32 actionBit = 4;  // arrow type
}

message S_PLAYER_ARROW
{
	bool success = 1;
	Player player = 2;
	float yaw = 3;
	Vec3 vLookAt = 4;
	uint32 actionBit = 5;  // arrow type
}

message C_PLAYER_EQUIP
{
	Player player = 1;
	string equip = 2;
	string rune = 3;
	string legacy = 4;
	uint32 legacyNum = 5;
}

message S_PLAYER_EQUIP
{
	bool success = 1;
	Player player = 2;
	string equip = 3;
	string rune = 4;
	string legacy = 5;
	uint32 legacyNum = 6;
}

// test

message S_SPAWN_MONSTER
{
	uint32 id = 1;
	string factory = 2;
}

message S_MONSTER_SET_TARGET
{
	uint32 playerID = 1;
}

message C_MONSTER_WORLD
{
	uint32 id = 1;
	Matrix matWorld = 2;
}

message S_MONSTER_WORLD
{
	bool success = 1;
	uint32 id = 2;
	Matrix matWorld = 3;
}

message C_MONSTER_ATTACK
{
	uint32 id = 1;
}

message S_MONSTER_ATTACK
{
	bool success = 1;
	uint32 id = 2;
}